[TOC]: # "Java中Switch都可以支持哪些数据类型"

# Java中Switch都可以支持哪些数据类型
- [switch中可以有null吗？](#switch中可以有null吗)
- [支持的类型有](#支持的类型有)

在JDK1.5之前，switch循环只支持byte、short、char、int四种数据类型。

JDK1.5在switch循环中增加了枚举类与byte short char int的包装类，对四个包装的支持是因为Java编译器在底层手动进行拆箱，而对枚举类的支持是因为枚举类有一个ordinal方法，该方法实际上是一个int类型的数值。

JDK1.7开始支持String类型，但实际上String类型有一个hashCode算法，结果也是int类型，byte short char类型可以在不损失精度的情况下向上转型成int类型.所以总的来说,可以认为switch中只支持int。

## switch中可以有null吗？

- 在switch语句中，表达式的值不能是null，否则会在运行时抛出NullPointerException。在case字句中也不能使用null，否则会出现编译错误。

## switch支持的类型有?

- Java7中加入了对String类型的支持。所以支持的类型有：char、byte、init和Character、Byte、Short、Integer和String

## case语句可以重复吗？

- case语句的值是不能重复的。对于字符串类型的也一样，但是字符串中可以包含Unicode转义字符。重复值的检查是在Java编译器对Java源代码进行相关的词法转换之后才进行的。也就是说，有些case语句的值虽然在源代码中看起来是不同的，但是经词法转换之后是一样的，就会造成编译错误。比如：“男”和"\7537"就是一个意思。

## Java7 switch支持String的实现原理：

- 这个新特性是在编译器这个层次上实现的。而在Java虚拟机和字节码这个层次上还是只支持在switch语句中使用与整数类型兼容的类型。这么做的目的就是为了减少这个特性所影响的范围，以降低实现的代价。在编译器层次实现的含义是，虽然开发人员在Java源代码的switch语句中使用了字符串类型，但是在编译的过程中，编译器会根据源代码的含义进行转换，将字符串类型转换成与整数类型兼容的格式。不同的Java编译器可能采用不同的方式来转换，并采用不同的优化策略。比如：如果switch语句中只包含一个case语句，那么就可以简单的将其转换成一个if语句。如果包含一个case和一个default语句，就可以转换成if-else语句。而对于复杂的情况（多个case语句），也可以转换成Java 7 之前的switch语句，只不过使用字符串的哈希值作为switch语句表达式的值。经过转换，Java 虚拟机看到的仍然是与整数类型兼容的类型。这里要注意的是，在case字句中对应的语句块中仍然需要使用String的equals方法来进行字符串比较，这是因为哈希函数在映射的时候可能存在冲突，这样更加保险了。

## 什么情况下要使用枚举而不是String类型？

- 在Java 7之前switch中使用String类型的时候只能用枚举类型。而在Java 7 中由于switch语句增加了对字符串类型的支持，很多人就选择直接使用String类型。但是这样有个缺点，就是可读性差、维护麻烦。假如switch语句在多个地方出现的时候，在程序中多次出现字符串常量是一个不好的现象，而用枚举就可以避免这种情况。so，如果代码中多个地方使用swich语句来美剧字符串，就考虑用枚举类型进行替换。
